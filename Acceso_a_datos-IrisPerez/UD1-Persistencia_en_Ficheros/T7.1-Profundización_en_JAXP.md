## (Java API for XML Processing)

**Descripción**  
En esta unidad se amplía el conocimiento sobre la API estándar JAXP, usada para procesar XML en Java de forma unificada. Se estudian sus componentes, clases clave, modos de funcionamiento (DOM y SAX), validación XML con XSD y ventajas para el desarrollo modular y portable.

![](mapa_mental_jaxp.png)

## ¿Qué es JAXP?

JAXP (Java API for XML Processing) es una interfaz estándar que proporciona mecanismos para trabajar con XML en Java sin depender de una implementación concreta. Su objetivo es abstraer el uso de parsers (DOM, SAX, StAX) y facilitar la portabilidad.

Desde Java 1.4 está integrado de forma nativa.

- Permite usar diferentes estrategias de análisis (DOM, SAX) mediante factorías.
    
- Admite validación contra esquemas XSD.
    
- Se puede combinar con otras APIs como XPath y XSLT.

## Componentes principales de JAXP

|Componente|Función principal|
|---|---|
|`DocumentBuilderFactory`|Fábrica para crear parsers DOM|
|`DocumentBuilder`|Construye objetos `Document` desde XML|
|`SAXParserFactory`|Fábrica para crear parsers SAX|
|`SAXParser`|Parser SAX basado en eventos|
|`TransformerFactory`|Fábrica de transformadores para generar salida XML|
|`SchemaFactory`|Permite activar validación con XSD|

#### (Archivo clientes.xml de ejemplo)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<clientes>
    <cliente id="1">
        <nombre>Ana Gómez</nombre>
        <email>ana.gomez@email.com</email>
        <telefono>678123456</telefono>
    </cliente>
    <cliente id="2">
        <nombre>Luis Pérez</nombre>
        <email>luis.perez@email.com</email>
        <telefono>612987654</telefono>
    </cliente>
    <cliente id="3">
        <nombre>María Ruiz</nombre>
        <email>maria.ruiz@email.com</email>
        <telefono>699654321</telefono>
    </cliente>
</clientes>

```

## Uso de JAXP con DOM

```java
import javax.xml.parsers.*;
import org.w3c.dom.*;
import java.io.File;

public class JAXP_DOM {
    public static void main(String[] args) {
        try {
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true); // opcional
            DocumentBuilder builder = dbf.newDocumentBuilder();
            Document doc = builder.parse(new File("datos/clientes.xml"));

            System.out.println("Documento cargado con éxito: " + doc.getDocumentElement().getNodeName());
        } catch (Exception e) {
            System.out.println("Error JAXP DOM: " + e.getMessage());
        }
    }
}
```

> ![](ejecucion_JAXP_DOM.png)

## Uso de JAXP con SAX

```java
import javax.xml.parsers.*;
import org.xml.sax.*;
import org.xml.sax.helpers.DefaultHandler;
import java.io.File;

public class JAXP_SAX {
    public static void main(String[] args) {
        try {
            SAXParserFactory spf = SAXParserFactory.newInstance();
            spf.setValidating(false);
            SAXParser parser = spf.newSAXParser();

            parser.parse(new File("datos/clientes.xml"), new DefaultHandler() {
                public void startElement(String uri, String localName, String qName, Attributes attributes) {
                    if (qName.equals("cliente")) {
                        System.out.println("ID Cliente: " + attributes.getValue("id"));
                    }
                }
            });

        } catch (Exception e) {
            System.out.println("Error JAXP SAX: " + e.getMessage());
        }
    }
}
```

> ![](ejecucion_JAXP_SAX.png)


#### (Archivo clientes.xsd)

```xsd
<?xml version="1.0" encoding="UTF-8"?>  
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">  
    <xs:element name="clientes">  
        <xs:complexType>  
            <xs:sequence>  
                <xs:element name="cliente" maxOccurs="unbounded">  
                    <xs:complexType>  
                        <xs:sequence>  
                            <xs:element name="nombre" type="xs:string"/>  
                            <xs:element name="email" type="xs:string"/>  
                            <xs:element name="telefono" type="xs:string"/>  
                        </xs:sequence>  
                        <xs:attribute name="id" type="xs:integer" use="required"/>  
                    </xs:complexType>  
                </xs:element>  
            </xs:sequence>  
        </xs:complexType>  
    </xs:element>  
</xs:schema>
```

## Validación de XML con XSD usando JAXP

```java
import javax.xml.parsers.*;
import javax.xml.validation.*;
import org.xml.sax.SAXException;
import org.w3c.dom.Document;
import java.io.File;

public class JAXP_Validacion {
    public static void main(String[] args) {
        try {
            SchemaFactory schemaFactory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
            Schema schema = schemaFactory.newSchema(new File("datos/clientes.xsd"));

            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            factory.setSchema(schema);

            DocumentBuilder builder = factory.newDocumentBuilder();
            Document doc = builder.parse(new File("datos/clientes.xml"));

            System.out.println("Validación correcta.");

        } catch (SAXException e) {
            System.out.println("Error de validación: " + e.getMessage());
        } catch (Exception e) {
            System.out.println("Error general: " + e.getMessage());
        }
    }
}
```

![](ejecucion_JAXP_Validacion.png)

## Ventajas de usar JAXP

- Portabilidad entre distintos parsers (internos o externos).
    
- Separación de lógica de análisis y lógica de negocio.
    
- Compatible con herramientas modernas como XPath, XSLT, JAXB.
    
- Estándar aceptado por la mayoría de frameworks Java.
    
- Soporte para validación con esquemas (XSD).
    

JAXP es la base sobre la que se construyen muchas soluciones de interoperabilidad en Java.